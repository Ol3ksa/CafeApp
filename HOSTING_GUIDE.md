# Гайд по хостингу: Як зробити програму доступною 24/7

## Проблема

Якщо ваш комп'ютер вимкнений, сервер не працює, тому програма недоступна. Щоб система працювала постійно, потрібен завжди увімкнений сервер.

## Рішення

Є кілька способів забезпечити постійну роботу:

---

## Варіант 1: Хмарний хостинг (РЕКОМЕНДОВАНО) ⭐⭐⭐

### Переваги:
- ✅ Працює 24/7 без перерв
- ✅ Не залежить від вашого комп'ютера
- ✅ Захищено від відключення світла
- ✅ Швидкий доступ з будь-якого місця

### Варіанти хостингу:

#### 1.1 Railway.app (найпростіше)
**Ціна:** Безкоштовний план (500 годин/місяць) або $5/місяць

**Кроки:**
1. Зареєструйтесь на https://railway.app
2. Створіть новий проект
3. Завантажте ваші файли (server.py, Cafe22.html, orders.json)
4. Railway автоматично визначить Python і запустить сервер
5. Отримайте URL типу `ваш-проект.railway.app`

**Налаштування:**
- Встановіть змінні оточення:
  - `CAFE_ADMIN_PASSWORD` - пароль адміна
  - `CAFE_SCREEN_PASSWORD` - пароль екрана
  - `CAFE_SECRET_KEY` - секретний ключ (згенеруйте випадковий рядок)

#### 1.2 Render.com (безкоштовно)
**Ціна:** Безкоштовний план (з затримкою при бездіяльності)

**Кроки:**
1. Зареєструйтесь на https://render.com
2. Створіть новий Web Service
3. Підключіть GitHub репозиторій або завантажте файли
4. Вкажіть команду запуску: `python server.py`
5. Встановіть Port: `5000`

#### 1.3 PythonAnywhere (простий для початківців)
**Ціна:** Безкоштовний план (обмежений) або $5/місяць

**Кроки:**
1. Зареєструйтесь на https://www.pythonanywhere.com
2. Завантажте файли через файловий менеджер
3. Створіть Web App
4. Налаштуйте WSGI файл для Flask

---

## Варіант 2: VPS (Віртуальний сервер) ⭐⭐

### Переваги:
- ✅ Повний контроль
- ✅ Дешевше за довгий термін
- ✅ Можна налаштувати як завгодно

### Провайдери:
- **DigitalOcean**: $6/місяць (Droplet)
- **Vultr**: $6/місяць
- **Linode**: $5/місяць
- **Hetzner**: €4.15/місяць (Європа)

### Встановлення на VPS:

```bash
# 1. Підключіться до сервера
ssh root@ваш-ip-адрес

# 2. Оновіть систему
apt update && apt upgrade -y

# 3. Встановіть Python та pip
apt install python3 python3-pip -y

# 4. Встановіть залежності
pip3 install flask flask-socketio

# 5. Завантажте файли (використайте scp або git)
scp server.py Cafe22.html orders.json root@ваш-ip:/root/cafeapp/

# 6. Створіть systemd service для автозапуску
nano /etc/systemd/system/cafeapp.service
```

**Вміст файлу cafeapp.service:**
```ini
[Unit]
Description=Cafe App Server
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/root/cafeapp
ExecStart=/usr/bin/python3 /root/cafeapp/server.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

```bash
# 7. Запустіть сервіс
systemctl enable cafeapp
systemctl start cafeapp

# 8. Перевірте статус
systemctl status cafeapp
```

---

## Варіант 3: Raspberry Pi (домашній сервер) ⭐

### Переваги:
- ✅ Низька потужність
- ✅ Працює 24/7
- ✅ Один раз налаштувати

### Недоліки:
- ❌ Залежить від інтернету та електрики
- ❌ Потрібен статичний IP або DDNS

### Налаштування:

1. Встановіть Raspbian OS
2. Встановіть Python та залежності:
   ```bash
   sudo apt update
   sudo apt install python3 python3-pip -y
   pip3 install flask flask-socketio
   ```

3. Створіть автозапуск (див. VPS інструкції вище)
4. Налаштуйте роутер для пробросу порту 5000
5. Використайте DDNS (no-ip.com або duckdns.org) для статичної адреси

---

## Варіант 4: Завжди увімкнений комп'ютер/ноутбук ⭐

### Переваги:
- ✅ Не потрібні додаткові витрати
- ✅ Просте налаштування

### Недоліки:
- ❌ Витрати електроенергії
- ❌ Залежить від стабільності інтернету
- ❌ Ризик перегріву

### Налаштування Windows:

1. Вимкніть сон (див. `prevent_sleep.bat`)
2. Створіть автозапуск:

**Створіть файл `start_cafe.bat`:**
```batch
@echo off
cd /d "C:\Users\User\Desktop\CafeApp"
python server.py
pause
```

3. Додайте в автозавантаження:
   - Натисніть `Win+R`
   - Введіть `shell:startup`
   - Скопіюйте ярлик `start_cafe.bat` в цю папку

4. Або створіть Windows Service (складніше)

---

## Варіант 5: Обладнання в кафе з UPS ⭐⭐

Якщо у вас є стаціонарний комп'ютер в кафе:

1. Налаштуйте автозапуск Windows (див. вище)
2. Встановіть UPS (джерело безперебійного живлення) на випадок відключення світла
3. Використайте мобільний інтернет як резерв (USB модем)

---

## Рекомендації

### Для малого кафе:
- **Railway.app** або **Render.com** (найпростіше, безкоштовно або дешево)

### Для середнього кафе:
- **VPS** (DigitalOcean, Vultr) - більше контролю

### Для домашнього використання:
- **Raspberry Pi** або завжди увімкнений ноутбук

---

## Безпека

Незалежно від способу хостингу:

1. **Змініть паролі за замовчуванням:**
   ```bash
   export CAFE_ADMIN_PASSWORD="ваш_надійний_пароль"
   export CAFE_SCREEN_PASSWORD="інший_пароль"
   export CAFE_SECRET_KEY="випадковий_рядок_32_символи"
   ```

2. **Використайте HTTPS** (Let's Encrypt безкоштовний SSL)
3. **Обмежте доступ** за IP (якщо можливо)
4. **Регулярні резервні копії** orders.json

---

## Резервне копіювання

Налаштуйте автоматичне резервне копіювання `orders.json`:

### На VPS/Linux:
```bash
# Створіть скрипт backup.sh
#!/bin/bash
DATE=$(date +%Y%m%d_%H%M%S)
cp /root/cafeapp/orders.json /root/backups/orders_$DATE.json
# Залиште тільки останні 30 копій
ls -t /root/backups/orders_*.json | tail -n +31 | xargs rm -f

# Додайте в crontab (щодня о 2:00)
# 0 2 * * * /root/cafeapp/backup.sh
```

### На хмарному хостингу:
- Використайте вбудовані інструменти резервного копіювання
- Або налаштуйте автоматичне копіювання в Google Drive/Dropbox

---

## Тестування

Після налаштування перевірте:

1. ✅ Програма доступна за URL
2. ✅ Можна увійти з паролем
3. ✅ Створення замовлень працює
4. ✅ Real-time оновлення працюють
5. ✅ Після перезавантаження сервера програма запускається автоматично

---

## Підтримка

Якщо виникли проблеми:
1. Перевірте логи сервера
2. Перевірте, чи працює сервер: `systemctl status cafeapp`
3. Перевірте порти: `netstat -tulpn | grep 5000`
4. Перевірте файрвол



