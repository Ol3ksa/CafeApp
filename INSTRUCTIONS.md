# Інструкції для запобігання проблемам після гібернації

## Автоматичне виправлення (вже реалізовано в коді)

Система тепер автоматично:
- ✅ Виявляє повернення з гібернації/сну
- ✅ Автоматично перепідключається до сервера
- ✅ Використовує heartbeat для моніторингу з'єднання
- ✅ Має fallback на polling, якщо WebSocket недоступний
- ✅ Показує статус з'єднання користувачу

## Налаштування Windows для запобігання сну (опціонально)

Якщо ви хочете повністю запобігти переходу ноутбука в сон:

### Варіант 1: Через налаштування енергопостачання

1. Відкрийте **Панель керування** → **Електроживлення**
2. Натисніть **Налаштування схеми електроживлення**
3. Встановіть:
   - **Переводити комп'ютер у режим сну**: **Ніколи**
   - **Вимікати дисплей**: на ваш розсуд (наприклад, через 30 хвилин)

### Варіант 2: Через командний рядок (швидше)

Відкрийте PowerShell або CMD **від імені адміністратора** і виконайте:

```powershell
# Запобігання сну при підключенні до мережі
powercfg /change standby-timeout-ac 0

# Запобігання сну від батареї (якщо потрібно)
powercfg /change standby-timeout-dc 0

# Запобігання гібернації
powercfg /hibernate off
```

### Варіант 3: Тільки для поточного сеансу

Якщо ви хочете запобігти сну тільки під час роботи кафе:

```powershell
# Запобігання сну (працює до перезавантаження)
powercfg /change standby-timeout-ac 0
```

Після закриття кафе поверніть налаштування:

```powershell
# Повернення нормальних налаштувань (наприклад, 30 хвилин)
powercfg /change standby-timeout-ac 30
```

### Варіант 4: Використання утиліти Caffeine (рекомендовано)

Завантажте безкоштовну утиліту **Caffeine** або **Amphetamine**:
- Вона дозволяє швидко вмикати/вимикати запобігання сну
- Не потребує прав адміністратора
- Зручний інтерфейс

## Перевірка роботи

Після налаштування:
1. Запустіть сервер: `python server.py`
2. Відкрийте сайт у браузері
3. Перевірте статус з'єднання в правому верхньому куті
4. Якщо бачите "Онлайн" - все працює правильно

## Якщо проблеми залишаються

1. Перевірте, чи сервер запущений
2. Перевірте файрвол - порт 5000 повинен бути відкритий
3. Перезапустіть сервер після гібернації
4. Перезавантажте сторінку в браузері

## Технічні деталі

Система використовує:
- **WebSocket** для real-time оновлень
- **Polling fallback** якщо WebSocket недоступний
- **Heartbeat** (ping/pong) кожні 30 секунд
- **Автоматичне перепідключення** з експоненційним backoff
- **Visibility API** для виявлення повернення з гібернації

